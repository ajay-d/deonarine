<!DOCTYPE html>
<html lang="en">
    <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="robots" content="noodp" />
        <title>Python Apple Silicon - Ajay</title><meta name="Description" content="This is my cool site"><meta property="og:url" content="http://localhost:1313/posts/python-apple-silicon/">
  <meta property="og:site_name" content="Ajay">
  <meta property="og:title" content="Python Apple Silicon">
  <meta property="og:description" content="Install x86 dependencies Once you have the shell shortcuts, we can brew install x86 or arm libraries, since they reside in different locations
Switch to the intel shell and brew86 install the required libraries
libs=&#34;openssl readline sqlite3 xz zlib gettext&#34; for lib in ${=libs}; do brew86 install $lib done Next, set the compiler and linker flags realine is keg only brew86 info readline
For compilers to find readline you may need to set: export LDFLAGS=&#34;-L/usr/local/opt/readline/lib&#34; export CPPFLAGS=&#34;-I/usr/local/opt/readline/include&#34;">
  <meta property="og:locale" content="en">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2023-09-21T11:28:31-04:00">
    <meta property="article:modified_time" content="2023-09-21T11:28:31-04:00">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="Python Apple Silicon">
  <meta name="twitter:description" content="Install x86 dependencies Once you have the shell shortcuts, we can brew install x86 or arm libraries, since they reside in different locations
Switch to the intel shell and brew86 install the required libraries
libs=&#34;openssl readline sqlite3 xz zlib gettext&#34; for lib in ${=libs}; do brew86 install $lib done Next, set the compiler and linker flags realine is keg only brew86 info readline
For compilers to find readline you may need to set: export LDFLAGS=&#34;-L/usr/local/opt/readline/lib&#34; export CPPFLAGS=&#34;-I/usr/local/opt/readline/include&#34;">
<meta name="application-name" content="My cool site">
<meta name="apple-mobile-web-app-title" content="My cool site"><meta name="theme-color" content="#ffffff"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
        <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="manifest" href="/site.webmanifest"><link rel="canonical" href="http://localhost:1313/posts/python-apple-silicon/" /><link rel="prev" href="http://localhost:1313/posts/x86-shell/" /><link rel="next" href="http://localhost:1313/posts/cloudflare-jamstack/" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
        <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
    {
        "@context": "http://schema.org",
        "@type": "BlogPosting",
        "headline": "Python Apple Silicon",
        "inLanguage": "en",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "http:\/\/localhost:1313\/posts\/python-apple-silicon\/"
        },"genre": "posts","wordcount":  249 ,
        "url": "http:\/\/localhost:1313\/posts\/python-apple-silicon\/","datePublished": "2023-09-21T11:28:31-04:00","dateModified": "2023-09-21T11:28:31-04:00","publisher": {
            "@type": "Organization",
            "name": ""},"author": {
                "@type": "Person",
                "name": "Ajay Deonarine"
            },"description": ""
    }
    </script></head>
    <body data-header-desktop="fixed" data-header-mobile="auto"><script type="text/javascript">(window.localStorage && localStorage.getItem('theme') ? localStorage.getItem('theme') === 'dark' : ('dark' === 'auto' ? window.matchMedia('(prefers-color-scheme: dark)').matches : 'dark' === 'dark')) && document.body.setAttribute('theme', 'dark');</script>

        <div id="mask"></div><div class="wrapper"><header class="desktop" id="header-desktop">
    <div class="header-wrapper">
        <div class="header-title">
            <a href="/" title="Ajay">Ajay&#39;s Home</a>
        </div>
        <div class="menu">
            <div class="menu-inner"><a class="menu-item" href="/posts/" title="Musings"> Posts </a><a class="menu-item" href="/about/" title="About me"> About </a><span class="menu-item delimiter"></span><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                    <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
                </a></div>
        </div>
    </div>
</header><header class="mobile" id="header-mobile">
    <div class="header-container">
        <div class="header-wrapper">
            <div class="header-title">
                <a href="/" title="Ajay">Ajay&#39;s Home</a>
            </div>
            <div class="menu-toggle" id="menu-toggle-mobile">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="menu" id="menu-mobile"><a class="menu-item" href="/posts/" title="Musings">Posts</a><a class="menu-item" href="/about/" title="About me">About</a><a href="javascript:void(0);" class="menu-item theme-switch" title="Switch Theme">
                <i class="fas fa-adjust fa-fw" aria-hidden="true"></i>
            </a></div>
    </div>
</header><main class="main">
                <div class="container"><article class="page single"><h1 class="single-title animate__animated animate__flipInX">Python Apple Silicon</h1><div class="post-meta">
            <div class="post-meta-line"><span class="post-author"><a href="/" title="Author" rel="author" class="author"><i class="fas fa-user-circle fa-fw" aria-hidden="true"></i>Ajay Deonarine</a></span></div>
            <div class="post-meta-line">
                <i class="far fa-calendar-alt fa-fw" aria-hidden="true"></i>&nbsp;&nbsp;Sep. 21, 2023&nbsp;
                <i class="fas fa-pencil-alt fa-fw" aria-hidden="true"></i>&nbsp;249 words&nbsp;
                <i class="far fa-clock fa-fw" aria-hidden="true"></i>&nbsp;2 minutes&nbsp;</div>
        </div><div class="content" id="content"><h2 id="install-x86-dependencies">Install x86 dependencies</h2>
<p>Once you have the shell shortcuts, we can brew install x86 or arm libraries, since they reside in different locations</p>
<p>Switch to the <code>intel</code> shell and <code>brew86 install</code> the required libraries</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>libs<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;openssl readline sqlite3 xz zlib gettext&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> lib in <span style="color:#e6db74">${</span>=libs<span style="color:#e6db74">}</span>; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>brew86 install $lib
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><p>Next, set the compiler and linker flags
realine is keg only <code>brew86 info readline</code></p>
<p>For compilers to find readline you may need to set:
<code>export LDFLAGS=&quot;-L/usr/local/opt/readline/lib&quot;</code>
<code>export CPPFLAGS=&quot;-I/usr/local/opt/readline/include&quot;</code></p>
<p>For pkg-config to find readline you may need to set:
<code>export PKG_CONFIG_PATH=&quot;/usr/local/opt/readline/lib/pkgconfig&quot;</code></p>
<p>Here we set all the flags:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-bash" data-lang="bash"><span style="display:flex;"><span>libs<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;openssl readline sqlite3 xz zlib gettext&#34;</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">for</span> lib in <span style="color:#e6db74">${</span>=libs<span style="color:#e6db74">}</span>; <span style="color:#66d9ef">do</span>
</span></span><span style="display:flex;"><span>    prefix<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span><span style="color:#66d9ef">$(</span>brew86 --prefix $lib<span style="color:#66d9ef">)</span><span style="color:#e6db74">&#34;</span>
</span></span><span style="display:flex;"><span>    export CFLAGS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$CFLAGS<span style="color:#e6db74"> -I</span>$prefix<span style="color:#e6db74">/include&#34;</span>
</span></span><span style="display:flex;"><span>    export LDFLAGS<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;</span>$LDFLAGS<span style="color:#e6db74"> -L</span>$prefix<span style="color:#e6db74">/lib&#34;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">done</span>
</span></span></code></pre></div><p>Alternately, you can just use (and not install the x86 packages above):
<code>export PYTHON_BUILD_SKIP_HOMEBREW=&quot;1&quot;</code></p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-console" data-lang="console"><span style="display:flex;"><span>ajay@Ajays-MacBook-Pro ~ % intel
</span></span><span style="display:flex;"><span>ajay@Ajays-MacBook-Pro ~ % /usr/bin/uname -m
</span></span><span style="display:flex;"><span>x86_64
</span></span><span style="display:flex;"><span>ajay@Ajays-MacBook-Pro ~ % export PYTHON_BUILD_SKIP_HOMEBREW=&#34;1&#34;
</span></span><span style="display:flex;"><span>ajay@Ajays-MacBook-Pro ~ % pyenv86 install 3.11.4
</span></span><span style="display:flex;"><span>Downloading openssl-1.1.1s.tar.gz...
</span></span><span style="display:flex;"><span>-&gt; https://www.openssl.org/source/openssl-1.1.1s.tar.gz
</span></span><span style="display:flex;"><span>Installing openssl-1.1.1s...
</span></span><span style="display:flex;"><span>Installed openssl-1.1.1s to /Users/ajay/.pyenv/versions/3.11.4
</span></span><span style="display:flex;"><span>Downloading readline-8.2.tar.gz...
</span></span><span style="display:flex;"><span>-&gt; https://ftpmirror.gnu.org/readline/readline-8.2.tar.gz
</span></span><span style="display:flex;"><span>Installing readline-8.2...
</span></span><span style="display:flex;"><span>Installed readline-8.2 to /Users/ajay/.pyenv/versions/3.11.4
</span></span><span style="display:flex;"><span>Downloading Python-3.11.4.tar.xz...
</span></span><span style="display:flex;"><span>-&gt; https://www.python.org/ftp/python/3.11.4/Python-3.11.4.tar.xz
</span></span><span style="display:flex;"><span>Installing Python-3.11.4...
</span></span><span style="display:flex;"><span>python-build: use zlib from xcode sdk
</span></span><span style="display:flex;"><span>Installed Python-3.11.4 to /Users/ajay/.pyenv/versions/3.11.4
</span></span><span style="display:flex;"><span>ajay@Ajays-MacBook-Pro ~ % pyenv shell 3.11.4
</span></span><span style="display:flex;"><span>ajay@Ajays-MacBook-Pro ~ % python
</span></span><span style="display:flex;"><span>Python 3.11.4 (main, Sep 21 2023, 12:25:56) [Clang 15.0.0 (clang-1500.0.40.1)] on darwin
</span></span><span style="display:flex;"><span>Type &#34;help&#34;, &#34;copyright&#34;, &#34;credits&#34; or &#34;license&#34; for more information.
</span></span><span style="display:flex;"><span>&gt;&gt;&gt; import platform
</span></span><span style="display:flex;"><span>&gt;&gt;&gt; platform.machine<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>&#39;x86_64&#39;
</span></span><span style="display:flex;"><span>&gt;&gt;&gt; platform.platform<span style="color:#f92672">()</span>
</span></span><span style="display:flex;"><span>&#39;macOS-13.5.2-x86_64-i386-64bit&#39;
</span></span><span style="display:flex;"><span>&gt;&gt;&gt; 
</span></span></code></pre></div><p>of course I have a regular arm python environment, built for <a href="https://github.com/pyenv/pyenv/blob/master/plugins/python-build/README.md#building-for-maximum-performance" target="_blank" rel="noopener noreffer ">Maximum Performance</a>
<code>env PYTHON_CONFIGURE_OPTS='--enable-optimizations --with-lto' PYTHON_CFLAGS='-march=native -mtune=native' pyenv install 3.11.5</code></p>
</div><div class="post-footer" id="post-footer">
    <div class="post-info">
        <div class="post-info-line">
            <div class="post-info-mod">
            </div></div>
        <div class="post-info-line">
            <div class="post-info-md"></div>
            <div class="post-info-share">
                <span></span>
            </div>
        </div>
    </div>

    <div class="post-info-more">
        <section class="post-tags"></section>
        <section>
            <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
        </section>
    </div>

    <div class="post-nav"><a href="/posts/x86-shell/" class="prev" rel="prev" title="x86 Shell"><i class="fas fa-angle-left fa-fw" aria-hidden="true"></i>x86 Shell</a>
            <a href="/posts/cloudflare-jamstack/" class="next" rel="next" title="Cloudflare Jamstack">Cloudflare Jamstack<i class="fas fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article></div>
            </main><footer class="footer">
        <div class="footer-container"><div class="footer-line" itemscope itemtype="http://schema.org/CreativeWork"><i class="far fa-copyright fa-fw" aria-hidden="true"></i><span itemprop="copyrightYear">2022 - 2024</span><span class="author" itemprop="copyrightHolder">&nbsp;<a href="/" target="_blank">Ajay Deonarine</a></span></div>
        </div>
    </footer></div>

        <div id="fixed-buttons"><a href="#" id="back-to-top" class="fixed-button" title="Back to Top">
                <i class="fas fa-arrow-up fa-fw" aria-hidden="true"></i>
            </a><a href="#" id="view-comments" class="fixed-button" title="View Comments">
                <i class="fas fa-comment fa-fw" aria-hidden="true"></i>
            </a>
        </div><script type="text/javascript" src="/lib/lazysizes/lazysizes.min.js"></script><script type="text/javascript" src="/lib/clipboard/clipboard.min.js"></script><script type="text/javascript">window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":50},"comment":{}};</script><script type="text/javascript" src="/js/theme.min.js"></script></body>
</html>
